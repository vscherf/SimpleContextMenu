"use strict";function fnSetContextMenu(n,t,i,r){for(let u in t.items){let s=new $("<li>"),f=t.items[u];s.prop("title",f.title);let e=new $("<a>"),v=new $("<i>"),a=new $("<span>"),y=f.disabled,c=!1,l="Funktion nicht verfügbar";f.disableTitle&&(l=f.disableTitle);let h=f.action,o=Math.random().toString(36).substr(2,16);$.isFunction(y)&&y($(r))&&(c=!0);switch(f.type){case"header":let k=new $("<div>");k.addClass("s-cm-header");typeof f["class"]!="undefined"&&k.addClass(f["class"]);k.html(f.label);k.appendTo(s);break;case"text":let t=new $("<input type='text'>");if(t.prop("placeholder",f.placeholder),o=typeof f.id=="undefined"?"scm-txt-"+o:f.id,t.prop("id",o),c)t.prop("title","dieser Eintrag ist nicht verfügbar"),t.addClass("s-cm-disabled"),t.prop("title",l);else{t.prop("title",f.title);let n=f.value;if($.isFunction(n)?t.val(n(r)):t.val(n),$.isFunction(h))t.on("change",function(){h($(this),scmTarget)})}t.appendTo(s);break;case"select":let n=new $("<select>");if(n.prop("placeholder",f.placeholder),o=typeof f.id=="undefined"?"scm-cbo-"+o:f.id,n.prop("id",o),n.prop("title",f.title),c)n.prop("title",l),n.addClass("s-cm-disabled"),n.prop("title",l);else{let t=f.listItems,i=f.value,r=f.hasNullValue;$.isFunction(t)&&(t=t());r&&n.append($("<option>",{value:null,text:null}));for(let i in t)n.append($("<option>",{value:t[i].val,text:t[i].text}));if(i&&n.val(i),$.isFunction(h))n.on("change",function(){h($(this),scmTarget)})}n.appendTo(s);break;case"checkbox":let b=new $("<input type='checkbox'>"),u=new $("<div>"),nt=new $("<div>"),g=new $("<div>"),p=new $("<label>");o=typeof f.id=="undefined"?"scm-chk-"+o:f.id;p.attr("data-toggle-on",f.dataOn);p.attr("data-toggle-off",f.dataOff);nt.appendTo(u);b.appendTo(g);p.appendTo(g);g.appendTo(u);u.addClass("s-cm-checkbox");u.prop("title",f.title);nt.html(f.label);b.prop("id",o);let d="";if(f.mode)switch(f.mode){case"slide":case"flip":case"light":case"flat":case"ios":d="s-cm-tgl-"+f.mode;break;default:d="s-cm-tgl-light"}else d="s-cm-tgl-light";b.addClass("s-cm-tgl "+d);p.prop("for",o);let tt=f.value,y=!1;if($.isFunction(tt)&&(y=tt(scmTarget),y=y==="true"||y===!0?!0:!1,typeof y=="undefined"&&(y=!1)),$(b).prop("checked",y),c)u.addClass("s-cm-disabled"),p.addClass("s-cm-disabled"),u.prop("title",l);else if($.isFunction(h))p.on("click",function(){h(b,scmTarget)});s.css("padding","0 2px 0 0");u.appendTo(s);break;case"button":e.prop("href","#");o=typeof f.id=="undefined"?"scm-btn-"+o:f.id;e.prop("id",o);v.attr("style","background:url('"+f.icon+"') center center no-repeat");let w=f.label;if(w.indexOf("<\/")>0&&(w=$(w).text()),c)e.removeClass(),e.addClass("s-cm-disabled"),e.html(w),e.prop("title",l);else{if(typeof f["class"]!="undefined"){let n=new $("<label>");n.addClass(f["class"]);n.html(w);n.appendTo(e)}else e.html(w);let n;if(typeof i!="undefined"&&(n=i.out),$.isFunction(h))e.on("click",function(){h($(this),scmTarget);$(scmTarget).data("scm-retvalue")&&$(scmTarget).html($(scmTarget).data("scm-retvalue"));fnHideSCM(n)});if(f.retValue)e.on("click",function(){scmTarget.html(f.retValue);fnHideSCM(n)})}a.html("&nbsp;");a.addClass("s-cm-separator-pic");e.prepend(a);e.data("id",o);e.prepend(v);e.appendTo(s)}if(n.append(s),f.separator_before){let n=new $("<li>"),t=new $("<a>");t.prop("href","#");t.html("&nbsp;");f.type==="header"?n.addClass("s-cm-separator-header-before"):n.addClass("s-cm-separator");t.appendTo(n);n.insertBefore(s)}if(f.separator_after){let n=new $("<li>"),t=new $("<a>");t.prop("href","#");t.html("&nbsp;");f.type==="header"?(n.removeClass("s-cm-separator"),n.addClass("s-cm-separator-header-after")):n.addClass("s-cm-separator");t.appendTo(n);n.insertAfter(s)}if(typeof f.submenu!="undefined"){let n=new $("<ul>");n.appendTo(s);c||fnSetContextMenu(n,f.submenu,i,r)}}}function fnHideSCM(n){typeof n!="undefined"?typeof scmTarget!="undefined"&&scmTarget.length>0?n==="transfer"?$(".s-cm").hide("transfer",{to:scmTarget,className:"s-cm-effect-transfer"}):($(".s-cm").hide(n),$(".s-cm").promise().done(function(){$(".s-cm").remove();return})):($(".s-cm").hide(n),$(".s-cm").promise().done(function(){$(".s-cm").remove();return})):($(".s-cm").remove(),$(".s-cm").promise().done(function(){return}));$("."+targetClass).removeClass(targetClass)}let scmTarget,targetClass="s-cm-target",def={"in":"fade",out:"fade",hideDefaultContext:!0,targetClass:"s-cm-target",headline:"Simple Context Menu"};$(document).ready(function(){$(document).on("mousedown",function(n){let t=$(".s-cm");$(n.target).closest(".s-cm").length===0&&fnHideSCM("fade")})});jQuery.fn.SimpleContextMenu=function(n){if(typeof n=="undefined")return!1;$(this).contextmenu(function(){return!1});$(this).on("contextmenu",function(t){let r,f,i,u;if(scmTarget=$(this),i=n.defaults,typeof i=="undefined")i=def;else for(let n in def)typeof i[n]=="undefined"&&(i[n]=def[n]);r=i["in"];f=i.hideDefaultContext;u=i.targetClass;$(".s-cm").hide("fade");$(".s-cm").promise().done(function(){$(".s-cm").remove();let e=new $("<ul>");e.addClass("s-cm");let o=t.pageX,s=t.pageY;if(e.css("top",s),e.css("left",o),i.headline){let n=new $("<li>");n.addClass("s-cm-headline");n.html(i.headline);n.appendTo(e)}f&&e.attr("oncontextmenu","return false");fnSetContextMenu(e,n,n.defaults,scmTarget);$("body").append(e);$(".s-cm").find("li:has(ul)").children("a").addClass("s-cm-parent");$(".s-cm").find("a.s-cm-parent").not(".s-cm-disabled").parent("li:has(ul)").hover(function(){$(this).addClass("s-cm-a-hovered");$(this).children("ul").show()},function(){$(this).removeClass("s-cm-a-hovered");$(this).children("ul").hide()});typeof r!="undefined"?$(e).show(r):$(e).show();u&&$(scmTarget).addClass(u)})})};
